CREATE OR REPLACE PACKAGE FIDE_LOS_JAULES_PROVEEDORES_PKG AS
    PROCEDURE FIDE_PROVEEDORES_TB_GET_PROVEEDORES_SP (p_cursor OUT SYS_REFCURSOR);
    PROCEDURE FIDE_PROVEEDORES_TB_GET_PROVEEDOR_SP (p_cursor OUT SYS_REFCURSOR, p_id IN NUMBER);
    PROCEDURE FIDE_PROVEEDORES_TB_GET_ESTADO_PROVEEDOR_SP (p_cursor OUT SYS_REFCURSOR, p_id IN NUMBER);
END FIDE_LOS_JAULES_PROVEEDORES_PKG;
/

CREATE OR REPLACE PACKAGE BODY FIDE_LOS_JAULES_PROVEEDORES_PKG AS
    PROCEDURE FIDE_PROVEEDORES_TB_GET_PROVEEDORES_SP (p_cursor OUT SYS_REFCURSOR) IS
    BEGIN
        OPEN p_cursor FOR
        SELECT 
            pr.ID_PROVEEDOR,
            pr.NOMBRE,
            pr.TELEFONO,
            pr.EMAIL,
            e.DESCRIPCION AS ESTADO
        FROM FIDE_PROVEEDORES_TB pr
        JOIN FIDE_ESTADO_TB e ON pr.ID_ESTADO = e.ID_ESTADO;
    END FIDE_PROVEEDORES_TB_GET_PROVEEDORES_SP;

    PROCEDURE FIDE_PROVEEDORES_TB_GET_PROVEEDOR_SP (p_cursor OUT SYS_REFCURSOR, p_id IN NUMBER) IS
    BEGIN
        OPEN p_cursor FOR
        SELECT 
            pr.ID_PROVEEDOR,
            pr.NOMBRE,
            pr.TELEFONO,
            pr.EMAIL,
            e.DESCRIPCION AS ESTADO
        FROM FIDE_PROVEEDORES_TB pr
        JOIN FIDE_ESTADO_TB e ON pr.ID_ESTADO = e.ID_ESTADO
        WHERE pr.ID_PROVEEDOR = p_id;
    END FIDE_PROVEEDORES_TB_GET_PROVEEDOR_SP;

    PROCEDURE FIDE_PROVEEDORES_TB_GET_ESTADO_PROVEEDOR_SP (p_cursor OUT SYS_REFCURSOR, p_id IN NUMBER) IS
    BEGIN
        OPEN p_cursor FOR
        SELECT 
            pr.ID_PROVEEDOR,
            e.DESCRIPCION AS ESTADO
        FROM FIDE_PROVEEDORES_TB pr
        JOIN FIDE_ESTADO_TB e ON pr.ID_ESTADO = e.ID_ESTADO
        WHERE pr.ID_PROVEEDOR = p_id;
    END FIDE_PROVEEDORES_TB_GET_ESTADO_PROVEEDOR_SP;

END FIDE_LOS_JAULES_PROVEEDORES_PKG;
/
